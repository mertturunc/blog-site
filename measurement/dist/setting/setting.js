System.register(["jimu-core","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/basic/color-picker","jimu-core/react"],(function(e,t){var s={},i={},a={},o={},n={};return{setters:[function(e){s.Immutable=e.Immutable,s.React=e.React,s.classNames=e.classNames,s.css=e.css,s.defaultMessages=e.defaultMessages,s.jsx=e.jsx,s.polished=e.polished},function(e){i.MapWidgetSelector=e.MapWidgetSelector,i.SettingRow=e.SettingRow,i.SettingSection=e.SettingSection},function(e){a.Button=e.Button,a.Icon=e.Icon,a.Select=e.Select,a.Switch=e.Switch,a.TextInput=e.TextInput,a.defaultMessages=e.defaultMessages},function(e){o.ColorPicker=e.ColorPicker},function(e){n.Fragment=e.Fragment}],execute:function(){e((()=>{var e={771:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="m2.561 7.876 1.138 20.023C3.699 30.164 5.83 32 8.459 32h15.724c2.629 0 4.76-1.836 4.76-4.101l1.095-20.023zm28.806-1.42c.005-.844.008-.901.008-.957 0-2.202-1.483-3.411-3.472-3.411l-5.537.005C22.366.937 21.082 0 19.768 0h-6.893c-1.314 0-2.64.937-2.64 2.093l-5.543-.005c-2.197 0-3.472 1.473-3.472 3.411 0 .057.003.113.008.957zm-10.306 6.682c0-.638.588-1.156 1.314-1.156s1.314.517 1.314 1.156v13.24c0 .638-.588 1.156-1.314 1.156s-1.314-.517-1.314-1.156zm-6.077 0c0-.638.589-1.156 1.315-1.156s1.314.517 1.314 1.156v13.24c0 .638-.588 1.156-1.314 1.156s-1.315-.517-1.315-1.156zm-6.074 0c0-.638.588-1.156 1.315-1.156s1.314.517 1.314 1.156v13.24c0 .638-.589 1.156-1.314 1.156s-1.315-.517-1.315-1.156z"></path></svg>'},891:e=>{"use strict";e.exports=s},315:e=>{"use strict";e.exports=n},726:e=>{"use strict";e.exports=a},756:e=>{"use strict";e.exports=i},362:e=>{"use strict";e.exports=o}},t={};function l(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,l),a.exports}l.d=(e,t)=>{for(var s in t)l.o(t,s)&&!l.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var r={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(r),l.d(r,{__set_webpack_public_path__:()=>h,default:()=>c});var e=l(891);const t={sourceLabel:"Widget Settings",selectMapWidget:"Select a Map widget",defaultsSectionLabel:"Defaults for measurments",areasUnit:"Default area unit",lengthUnit:"Default length unit",toolsSectionLabel:"Show measurement tools:",locationTool:"Location",distanceTool:"Distance",areaTool:"Area",imperial:"Imperial",metric:"Metric","square-meters":"Square meters","square-kilometers":"Square kilometers","square-inches":"Square inches","square-feet":"Square feet","square-":"Square yards","square-miles":"Square miles","square-us-feet":"Square feet (US)",acres:"Acres",ares:"Ares",hectares:"Hectares",inches:"Inches",feet:"Feet",yards:"Yards",miles:"Miles","nautical-miles":"Nautical miles","us-feet":"Feet (US)",meters:"Meters",kilometers:"Kilometers",locationOptions:"Location units:",locationUnitType:"Unit type",locationUnitWKID:"Unit WKID",AddLoactionUnit:"Add Unit",measureColors:"Measurement colors:",pathColor:"Path color",fillColor:"Fill color"};var s=l(756),i=l(726),a=l(362),o=l(315);const n="jimu-widget-";class c extends e.React.PureComponent{constructor(s){super(s),this.onMapWidgetSelected=e=>{this.props.onSettingChange({id:this.props.id,useMapWidgetIds:e})},this.formatMessage=(s,a)=>{const o=Object.assign({},t,i.defaultMessages,e.defaultMessages);return this.props.intl.formatMessage({id:s,defaultMessage:o[s]},a)},this.locationEnabledChange=e=>{const t=e.currentTarget;this.setState({locationEnabled:t.checked}),this.onPropertyChange("locationTool",t.checked)},this.distanceEnabledChange=e=>{const t=e.currentTarget;this.setState({distanceEnabled:t.checked}),this.onPropertyChange("distanceTool",t.checked)},this.areaEnabledChange=e=>{const t=e.currentTarget;this.setState({areaEnabled:t.checked}),this.onPropertyChange("areaTool",t.checked)},this.dAreaChanged=e=>{var t;const s=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;this.setState({defaultAreaUnit:s}),this.onPropertyChange("defaultAreaUnit",s)},this.dlengthChanged=e=>{var t;const s=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;this.setState({defaultLengthUnit:s}),this.onPropertyChange("defaultLengthUnit",s)},this.onPropertyChange=(e,t)=>{const{config:s}=this.props;if(t===s[e])return;const i=s.set(e,t),a={id:this.props.id,config:i};this.props.onSettingChange(a)},this.getAreaOptions=()=>{const t=[];return["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"].map(((s,i)=>{t.push((0,e.jsx)("option",{key:i,value:s},this.formatMessage(s)))})),t},this.getLengthOptions=()=>{const t=[];return["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"].map(((s,i)=>{t.push((0,e.jsx)("option",{key:i,value:s},this.formatMessage(s)))})),t},this.getUnitTypeOptions=()=>{const t=[];return["DEG","DMS","CUSTOM"].map(((s,i)=>{t.push((0,e.jsx)("option",{key:i,value:s},this.formatMessage(s)))})),t},this.addLocUnit=t=>{t&&t.stopPropagation();let{config:s}=this.props;const{activeId:i}=this.state,a=s.locationOptions.asMutable({deep:!0}),o={id:a.length+1,type:"CUSTOM",label:"Enter label for unit",wkid:4326};a.push(o);const n=(0,e.Immutable)(a);this.onPropertyChange("locationOptions",n),this.setState({activeId:o.id})},this.handleDelete=(t,s)=>{s&&s.stopPropagation();const{id:i}=t,{activeId:a}=this.state;let{config:o}=this.props;const n=o.locationOptions,l=n.findIndex((e=>e.id===i));if(-1===l)return;const r=n.asMutable({deep:!0});let c;r.splice(l,1),0===a&&r.length>=1&&(c=r[0]);const h=(0,e.Immutable)(r);this.onPropertyChange("locationOptions",h)},this.handleSelect=(e,t)=>{const{activeId:s}=this.state;s!==e?this.setState({activeId:e}):this.setState({activeId:0})},this.onlocUnitChange=(e,t,s)=>{const{config:i}=this.props,a=i.locationOptions,o=a.findIndex((t=>t.id===e)),n=a.map(((e,i)=>o===i?"wkid"===s?e.set(s,parseInt(t)):e.set(s,t):e));this.onPropertyChange("locationOptions",n)},this.handleKeydown=(e,t)=>{13===e.keyCode&&t.current.blur()},this.settingsColorChange=(e,t)=>{this.onPropertyChange(t,e),"fillColor"===t?this.setState({fillColor:e}):this.setState({pathColor:e})},this.getStyle=t=>e.css`
      &.jimu-widget-measurement-setting{
        .measurement-setting {
          display: flex;
          flex-direction: column;
          height: 100%;
          .bookmark-setting-flex {
            flex: 1;
          }
        }
        .setting-location-unit-list {
          width: 100%;
          display: inline-block;
          margin-bottom: ${e.polished.rem(4)};
          .bookmark-edit-input {
            padding: 3px 0;
          }
        }
        .setting-location-unit-list:hover {
          cursor: pointer;
          background: ${t.colors.secondary};
          border-left: 2px solid ${t.colors.primary};
        }
        .active-unit {
          background: ${t.colors.secondary};
          margin-bottom: 0 !important;
          border: 1px solid ${t.colors.palette.light[600]};
          border-width: 1px 1px 0;
        }
        .active-unit-content {
          border: 1px solid ${t.colors.palette.light[600]};
          border-width: 0 1px 1px;
          padding: ${e.polished.rem(8)};
          margin-bottom: ${e.polished.rem(4)};
        }
        .header-title-input {
          width: 150px;
        }
        .drop-height {
          .dropdown-button {
            height: ${e.polished.rem(26)};
          }
        }
      }
    `,this.state={locationEnabled:!0,areaEnabled:!0,distanceEnabled:!0,defaultAreaUnit:this.props.config.defaultAreaUnit||"imperial",defaultLengthUnit:this.props.config.defaultLengthUnit||"imperial",activeId:0,pathColor:this.props.config.pathColor||"#ff8000",fillColor:this.props.config.fillColor||"#ff8000"}}render(){const{config:r}=this.props,{locationEnabled:c,distanceEnabled:h,areaEnabled:d,defaultAreaUnit:p,defaultLengthUnit:g,activeId:u,pathColor:m,fillColor:f}=this.state;return(0,e.jsx)("div",{className:(0,e.classNames)(`${n}measurement-setting`,`${n}setting`),css:this.getStyle(this.props.theme)},(0,e.jsx)(s.SettingSection,{className:"map-selector-section",title:this.props.intl.formatMessage({id:"sourceLabel",defaultMessage:t.sourceLabel})},(0,e.jsx)(s.SettingRow,{label:this.formatMessage("selectMapWidget")}),(0,e.jsx)(s.SettingRow,null,(0,e.jsx)(s.MapWidgetSelector,{onSelect:this.onMapWidgetSelected,useMapWidgetIds:this.props.useMapWidgetIds}))),(0,e.jsx)(s.SettingSection,{className:"defaults-section",title:this.formatMessage("defaultsSectionLabel")},(0,e.jsx)(s.SettingRow,{label:this.formatMessage("areasUnit"),flow:"wrap"},(0,e.jsx)(i.Select,{style:{display:"inline-block",width:"calc(100% -70px)"},onChange:this.dAreaChanged,className:"top-drop",value:p},this.getAreaOptions())),(0,e.jsx)(s.SettingRow,{label:this.formatMessage("lengthUnit"),flow:"wrap"},(0,e.jsx)(i.Select,{style:{display:"inline-block",width:"calc(100% -70px)"},onChange:this.dlengthChanged,className:"top-drop",value:g},this.getLengthOptions()))),(0,e.jsx)(s.SettingSection,{className:"tools-section",title:this.formatMessage("toolsSectionLabel")},(0,e.jsx)(s.SettingRow,{label:this.formatMessage("locationTool"),flow:"no-wrap"},(0,e.jsx)(i.Switch,{title:this.formatMessage("locationTool"),className:"mr-4",onChange:this.locationEnabledChange,checked:c})),(0,e.jsx)(s.SettingRow,{label:this.formatMessage("distanceTool"),flow:"no-wrap"},(0,e.jsx)(i.Switch,{title:this.formatMessage("distanceTool"),className:"mr-4",onChange:this.distanceEnabledChange,checked:h})),(0,e.jsx)(s.SettingRow,{label:this.formatMessage("areaTool"),flow:"no-wrap"},(0,e.jsx)(i.Switch,{title:this.formatMessage("areaTool"),className:"mr-4",onChange:this.areaEnabledChange,checked:d}))),(0,e.jsx)(s.SettingSection,{className:"locationOptions",title:this.formatMessage("locationOptions")},(0,e.jsx)(s.SettingRow,null,(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)(i.Button,{className:"w-100 text-dark",type:"primary",onClick:this.addLocUnit},this.formatMessage("AddLoactionUnit")))),r.locationOptions&&0!==r.locationOptions.length&&(0,e.jsx)(s.SettingRow,null,(0,e.jsx)("div",{className:"w-100"},r.locationOptions.map(((t,a)=>{e.React.createRef();const n=e.React.createRef(),r=e.React.createRef();return(0,e.jsx)(o.Fragment,{key:a},(0,e.jsx)("div",{className:`$${u===t.id?"active-unit":""} setting-location-unit-list`,onClick:()=>this.handleSelect(t.id,t)},(0,e.jsx)(i.TextInput,{className:"header-title-input h5",ref:n,size:"sm",title:t.label,value:t.label||"",onChange:e=>this.onlocUnitChange(t.id,e.target.value,"label"),onClick:e=>e.stopPropagation(),onKeyDown:e=>this.handleKeydown(e,n)}),(0,e.jsx)("span",{className:"float-right"},(0,e.jsx)(i.Button,{title:this.formatMessage("deleteOption"),onClick:e=>this.handleDelete(t,e),type:"tertiary",icon:!0},(0,e.jsx)(i.Icon,{icon:l(771),size:12})))),u===t.id&&(0,e.jsx)("div",{className:"active-unit-content"},(0,e.jsx)(s.SettingRow,{label:this.formatMessage("locationUnitType"),flow:"wrap"},(0,e.jsx)(i.Select,{onChange:e=>this.onlocUnitChange(t.id,e.target.value,"type"),title:t.type,size:"sm",className:"drop-height",value:t.type||""},this.getUnitTypeOptions())),(0,e.jsx)(s.SettingRow,{label:this.formatMessage("locationUnitWKID"),flow:"wrap"},(0,e.jsx)(i.TextInput,{className:"header-title-input h5",ref:r,size:"sm",title:t.wkid.toString(),value:t.wkid||"",onChange:e=>this.onlocUnitChange(t.id,e.target.value,"wkid"),onClick:e=>e.stopPropagation(),onKeyDown:e=>this.handleKeydown(e,r)}))))}))))),(0,e.jsx)(s.SettingSection,{title:this.formatMessage("measureColors"),className:"colors-section"},(0,e.jsx)(s.SettingRow,{label:this.formatMessage("pathColor"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{className:"mr-4 pathcolorpicker",style:{padding:"0"},width:26,height:26,color:m||"#ff8000",onChange:e=>{this.settingsColorChange(e,"pathColor")}})),(0,e.jsx)(s.SettingRow,{label:this.formatMessage("pathColor"),flow:"wrap"},(0,e.jsx)(a.ColorPicker,{className:"mr-4 fillcolorpicker",style:{padding:"0"},width:26,height:26,color:f||"#ff8000",onChange:e=>{this.settingsColorChange(e,"fillColor")}}))))}}function h(e){l.p=e}})(),r})())}}}));